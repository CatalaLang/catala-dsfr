<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Lexer_common (catala.Surface.Lexer_common)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">catala</a> &#x00BB; <a href="../index.html">Surface</a> &#x00BB; Lexer_common</nav><header class="odoc-preamble"><h1>Module <code><span>Surface.Lexer_common</span></code></h1><p>Auxiliary functions used by all lexers.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-lexing_context" class="anchored"><a href="#type-lexing_context" class="anchor"></a><code><span><span class="keyword">type</span> lexing_context</span><span> = </span></code><table><tr id="type-lexing_context.Law" class="anchored"><td class="def variant constructor"><a href="#type-lexing_context.Law" class="anchor"></a><code><span>| </span><span><span class="constructor">Law</span></span></code></td></tr><tr id="type-lexing_context.Code" class="anchored"><td class="def variant constructor"><a href="#type-lexing_context.Code" class="anchor"></a><code><span>| </span><span><span class="constructor">Code</span></span></code></td></tr><tr id="type-lexing_context.Directive" class="anchored"><td class="def variant constructor"><a href="#type-lexing_context.Directive" class="anchor"></a><code><span>| </span><span><span class="constructor">Directive</span></span></code></td></tr><tr id="type-lexing_context.Directive_args" class="anchored"><td class="def variant constructor"><a href="#type-lexing_context.Directive_args" class="anchor"></a><code><span>| </span><span><span class="constructor">Directive_args</span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec value" id="val-context" class="anchored"><a href="#val-context" class="anchor"></a><code><span><span class="keyword">val</span> context : <span><a href="#type-lexing_context">lexing_context</a> <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div><div class="spec-doc"><p>Reference, used by the lexer as the mutable state to distinguish whether it is lexing code or law.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-code_buffer" class="anchored"><a href="#val-code_buffer" class="anchor"></a><code><span><span class="keyword">val</span> code_buffer : <span class="xref-unresolved">Stdlib</span>.Buffer.t</span></code></div><div class="spec-doc"><p>Buffer that accumulates the string representation of the body of code being lexed. This string representation is used in the literate programming backends to faithfully capture the spacing pattern of the original program</p></div></div><div class="odoc-spec"><div class="spec value" id="val-update_acc" class="anchored"><a href="#val-update_acc" class="anchor"></a><code><span><span class="keyword">val</span> update_acc : <span><span class="xref-unresolved">Sedlexing</span>.lexbuf <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Updates <a href="#val-code_buffer"><code>code_buffer</code></a> with the current lexeme</p></div></div><div class="odoc-spec"><div class="spec value" id="val-raise_lexer_error" class="anchored"><a href="#val-raise_lexer_error" class="anchor"></a><code><span><span class="keyword">val</span> raise_lexer_error : <span><a href="../../Catala_utils/Pos/index.html#type-t">Catala_utils.Pos.t</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Error-generating helper</p></div></div><div class="odoc-spec"><div class="spec value" id="val-token_list_language_agnostic" class="anchored"><a href="#val-token_list_language_agnostic" class="anchor"></a><code><span><span class="keyword">val</span> token_list_language_agnostic : <span><span>(string * <a href="../Tokens/index.html#type-token">Tokens.token</a>)</span> list</span></span></code></div><div class="spec-doc"><p>Associative list matching each punctuation string part of the Catala syntax with its <a href="../Parser/index.html"><code>Surface.Parser</code></a> token. Same for all the input languages (English, French, etc.)</p></div></div><div class="odoc-spec"><div class="spec value" id="val-calc_precedence" class="anchored"><a href="#val-calc_precedence" class="anchor"></a><code><span><span class="keyword">val</span> calc_precedence : <span>string <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Calculates the precedence according a matched regex of the form : '<code>#</code>+'</p></div></div><div class="odoc-spec"><div class="spec value" id="val-get_law_heading" class="anchored"><a href="#val-get_law_heading" class="anchor"></a><code><span><span class="keyword">val</span> get_law_heading : <span><span class="xref-unresolved">Sedlexing</span>.lexbuf <span class="arrow">&#45;&gt;</span></span> <a href="../Tokens/index.html#type-token">Tokens.token</a></span></code></div><div class="spec-doc"><p>Gets the <code>LAW_HEADING</code> token from the current <code>lexbuf</code></p></div></div><div class="odoc-spec"><div class="spec module-type" id="module-type-LocalisedLexer" class="anchored"><a href="#module-type-LocalisedLexer" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-LocalisedLexer/index.html">LocalisedLexer</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>
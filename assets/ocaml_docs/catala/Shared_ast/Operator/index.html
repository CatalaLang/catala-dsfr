<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Operator (catala.Shared_ast.Operator)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">catala</a> &#x00BB; <a href="../index.html">Shared_ast</a> &#x00BB; Operator</nav><header class="odoc-preamble"><h1>Module <code><span>Shared_ast.Operator</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#catala-operator-utilities">Catala operator utilities</a><ul><li><a href="#getting-the-types-of-operators">Getting the types of operators</a></li><li><a href="#overload-handling">Overload handling</a></li></ul></li></ul></nav><div class="odoc-content"><h2 id="catala-operator-utilities"><a href="#catala-operator-utilities" class="anchor"></a>Catala operator utilities</h2><p>Resolving operators from the surface syntax proceeds in three steps:</p><ul><li>During desugaring, the operators may remain untyped (with <code>TAny</code>) or, if they have an explicit type suffix (e.g. the <code>$</code> for &quot;money&quot; in <code>+$</code>), their operands types are already explicited in the <code>EOp</code> expression node.</li><li><ul class="modules"><li><a href="../Typing/index.html"><code>Shared_ast.Typing</code></a> <span class="synopsis">Typing for the default calculus. Because of the error terms, we perform type inference using the classical W algorithm with union-find unification.</span></li></ul><p>will then enforce these constraints in addition to the known built-in type for each operator (e.g. <code>Eq: 'a -&gt; 'a -&gt; 'a</code> isn't encoded in the first-order AST types).</p></li><li><p>Finally, during </p><ul class="modules"><li><a href="../../Scopelang/From_desugared/index.html"><code>Scopelang.From_desugared</code></a> <span class="synopsis">Translation from <a href="../../Desugared/Ast/index.html"><code>Desugared.Ast</code></a> to <a href="../../Scopelang/Ast/index.html"><code>Scopelang.Ast</code></a></span></li></ul><p>, these types are leveraged to resolve the overloaded operators to their concrete, monomorphic counterparts</p></li></ul><div class="odoc-include"><div class="odoc-spec"><div class="spec type" id="type-monomorphic" class="anchored"><a href="#type-monomorphic" class="anchor"></a><code><span><span class="keyword">type</span> monomorphic</span><span> = <span>&lt; monomorphic : <span class="xref-unresolved">Shared_ast__Definitions.yes</span> &gt;</span></span></code></div><div class="spec-doc"><p>Operands and return types of the operator are fixed</p></div></div><div class="odoc-spec"><div class="spec type" id="type-polymorphic" class="anchored"><a href="#type-polymorphic" class="anchor"></a><code><span><span class="keyword">type</span> polymorphic</span><span> = <span>&lt; polymorphic : <span class="xref-unresolved">Shared_ast__Definitions.yes</span> &gt;</span></span></code></div><div class="spec-doc"><p>The operator is truly polymorphic: it's the same runtime function that may work on multiple types. We require that resolving the argument types from right to left trivially resolves all type variables declared in the operator type.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-overloaded" class="anchored"><a href="#type-overloaded" class="anchor"></a><code><span><span class="keyword">type</span> overloaded</span><span> = <span>&lt; overloaded : <span class="xref-unresolved">Shared_ast__Definitions.yes</span> &gt;</span></span></code></div><div class="spec-doc"><p>The operator is ambiguous and requires the types of its arguments to be known before it can be typed, using a pre-defined table</p></div></div><div class="odoc-spec"><div class="spec type" id="type-resolved" class="anchored"><a href="#type-resolved" class="anchor"></a><code><span><span class="keyword">type</span> resolved</span><span> = <span>&lt; resolved : <span class="xref-unresolved">Shared_ast__Definitions.yes</span> &gt;</span></span></code></div><div class="spec-doc"><p>Explicit monomorphic versions of the overloaded operators</p></div></div><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>_ t</span></span><span> = </span></code><table><tr id="type-t.Not" class="anchored"><td class="def variant constructor"><a href="#type-t.Not" class="anchor"></a><code><span>| </span><span><span class="constructor">Not</span> : <span><span>&lt; <a href="#type-monomorphic">monomorphic</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.GetDay" class="anchored"><td class="def variant constructor"><a href="#type-t.GetDay" class="anchor"></a><code><span>| </span><span><span class="constructor">GetDay</span> : <span><span>&lt; <a href="#type-monomorphic">monomorphic</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.GetMonth" class="anchored"><td class="def variant constructor"><a href="#type-t.GetMonth" class="anchor"></a><code><span>| </span><span><span class="constructor">GetMonth</span> : <span><span>&lt; <a href="#type-monomorphic">monomorphic</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.GetYear" class="anchored"><td class="def variant constructor"><a href="#type-t.GetYear" class="anchor"></a><code><span>| </span><span><span class="constructor">GetYear</span> : <span><span>&lt; <a href="#type-monomorphic">monomorphic</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.FirstDayOfMonth" class="anchored"><td class="def variant constructor"><a href="#type-t.FirstDayOfMonth" class="anchor"></a><code><span>| </span><span><span class="constructor">FirstDayOfMonth</span> : <span><span>&lt; <a href="#type-monomorphic">monomorphic</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.LastDayOfMonth" class="anchored"><td class="def variant constructor"><a href="#type-t.LastDayOfMonth" class="anchor"></a><code><span>| </span><span><span class="constructor">LastDayOfMonth</span> : <span><span>&lt; <a href="#type-monomorphic">monomorphic</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Length" class="anchored"><td class="def variant constructor"><a href="#type-t.Length" class="anchor"></a><code><span>| </span><span><span class="constructor">Length</span> : <span><span>&lt; <a href="#type-polymorphic">polymorphic</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Minus" class="anchored"><td class="def variant constructor"><a href="#type-t.Minus" class="anchor"></a><code><span>| </span><span><span class="constructor">Minus</span> : <span><span>&lt; <a href="#type-overloaded">overloaded</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Minus_int" class="anchored"><td class="def variant constructor"><a href="#type-t.Minus_int" class="anchor"></a><code><span>| </span><span><span class="constructor">Minus_int</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Minus_rat" class="anchored"><td class="def variant constructor"><a href="#type-t.Minus_rat" class="anchor"></a><code><span>| </span><span><span class="constructor">Minus_rat</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Minus_mon" class="anchored"><td class="def variant constructor"><a href="#type-t.Minus_mon" class="anchor"></a><code><span>| </span><span><span class="constructor">Minus_mon</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Minus_dur" class="anchored"><td class="def variant constructor"><a href="#type-t.Minus_dur" class="anchor"></a><code><span>| </span><span><span class="constructor">Minus_dur</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.ToRat" class="anchored"><td class="def variant constructor"><a href="#type-t.ToRat" class="anchor"></a><code><span>| </span><span><span class="constructor">ToRat</span> : <span><span>&lt; <a href="#type-overloaded">overloaded</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.ToRat_int" class="anchored"><td class="def variant constructor"><a href="#type-t.ToRat_int" class="anchor"></a><code><span>| </span><span><span class="constructor">ToRat_int</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.ToRat_mon" class="anchored"><td class="def variant constructor"><a href="#type-t.ToRat_mon" class="anchor"></a><code><span>| </span><span><span class="constructor">ToRat_mon</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.ToMoney" class="anchored"><td class="def variant constructor"><a href="#type-t.ToMoney" class="anchor"></a><code><span>| </span><span><span class="constructor">ToMoney</span> : <span><span>&lt; <a href="#type-overloaded">overloaded</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.ToMoney_rat" class="anchored"><td class="def variant constructor"><a href="#type-t.ToMoney_rat" class="anchor"></a><code><span>| </span><span><span class="constructor">ToMoney_rat</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Round" class="anchored"><td class="def variant constructor"><a href="#type-t.Round" class="anchor"></a><code><span>| </span><span><span class="constructor">Round</span> : <span><span>&lt; <a href="#type-overloaded">overloaded</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Round_rat" class="anchored"><td class="def variant constructor"><a href="#type-t.Round_rat" class="anchor"></a><code><span>| </span><span><span class="constructor">Round_rat</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Round_mon" class="anchored"><td class="def variant constructor"><a href="#type-t.Round_mon" class="anchor"></a><code><span>| </span><span><span class="constructor">Round_mon</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.And" class="anchored"><td class="def variant constructor"><a href="#type-t.And" class="anchor"></a><code><span>| </span><span><span class="constructor">And</span> : <span><span>&lt; <a href="#type-monomorphic">monomorphic</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Or" class="anchored"><td class="def variant constructor"><a href="#type-t.Or" class="anchor"></a><code><span>| </span><span><span class="constructor">Or</span> : <span><span>&lt; <a href="#type-monomorphic">monomorphic</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Xor" class="anchored"><td class="def variant constructor"><a href="#type-t.Xor" class="anchor"></a><code><span>| </span><span><span class="constructor">Xor</span> : <span><span>&lt; <a href="#type-monomorphic">monomorphic</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Eq" class="anchored"><td class="def variant constructor"><a href="#type-t.Eq" class="anchor"></a><code><span>| </span><span><span class="constructor">Eq</span> : <span><span>&lt; <a href="#type-polymorphic">polymorphic</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Map" class="anchored"><td class="def variant constructor"><a href="#type-t.Map" class="anchor"></a><code><span>| </span><span><span class="constructor">Map</span> : <span><span>&lt; <a href="#type-polymorphic">polymorphic</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Concat" class="anchored"><td class="def variant constructor"><a href="#type-t.Concat" class="anchor"></a><code><span>| </span><span><span class="constructor">Concat</span> : <span><span>&lt; <a href="#type-polymorphic">polymorphic</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Filter" class="anchored"><td class="def variant constructor"><a href="#type-t.Filter" class="anchor"></a><code><span>| </span><span><span class="constructor">Filter</span> : <span><span>&lt; <a href="#type-polymorphic">polymorphic</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Reduce" class="anchored"><td class="def variant constructor"><a href="#type-t.Reduce" class="anchor"></a><code><span>| </span><span><span class="constructor">Reduce</span> : <span><span>&lt; <a href="#type-polymorphic">polymorphic</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Add" class="anchored"><td class="def variant constructor"><a href="#type-t.Add" class="anchor"></a><code><span>| </span><span><span class="constructor">Add</span> : <span><span>&lt; <a href="#type-overloaded">overloaded</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Add_int_int" class="anchored"><td class="def variant constructor"><a href="#type-t.Add_int_int" class="anchor"></a><code><span>| </span><span><span class="constructor">Add_int_int</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Add_rat_rat" class="anchored"><td class="def variant constructor"><a href="#type-t.Add_rat_rat" class="anchor"></a><code><span>| </span><span><span class="constructor">Add_rat_rat</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Add_mon_mon" class="anchored"><td class="def variant constructor"><a href="#type-t.Add_mon_mon" class="anchor"></a><code><span>| </span><span><span class="constructor">Add_mon_mon</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Add_dat_dur" class="anchored"><td class="def variant constructor"><a href="#type-t.Add_dat_dur" class="anchor"></a><code><span>| </span><span><span class="constructor">Add_dat_dur</span> : <a href="../../Runtime_ocaml/Runtime/index.html#type-date_rounding">Runtime_ocaml.Runtime.date_rounding</a> <span class="arrow">&#45;&gt;</span> <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Add_dur_dur" class="anchored"><td class="def variant constructor"><a href="#type-t.Add_dur_dur" class="anchor"></a><code><span>| </span><span><span class="constructor">Add_dur_dur</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Sub" class="anchored"><td class="def variant constructor"><a href="#type-t.Sub" class="anchor"></a><code><span>| </span><span><span class="constructor">Sub</span> : <span><span>&lt; <a href="#type-overloaded">overloaded</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Sub_int_int" class="anchored"><td class="def variant constructor"><a href="#type-t.Sub_int_int" class="anchor"></a><code><span>| </span><span><span class="constructor">Sub_int_int</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Sub_rat_rat" class="anchored"><td class="def variant constructor"><a href="#type-t.Sub_rat_rat" class="anchor"></a><code><span>| </span><span><span class="constructor">Sub_rat_rat</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Sub_mon_mon" class="anchored"><td class="def variant constructor"><a href="#type-t.Sub_mon_mon" class="anchor"></a><code><span>| </span><span><span class="constructor">Sub_mon_mon</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Sub_dat_dat" class="anchored"><td class="def variant constructor"><a href="#type-t.Sub_dat_dat" class="anchor"></a><code><span>| </span><span><span class="constructor">Sub_dat_dat</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Sub_dat_dur" class="anchored"><td class="def variant constructor"><a href="#type-t.Sub_dat_dur" class="anchor"></a><code><span>| </span><span><span class="constructor">Sub_dat_dur</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Sub_dur_dur" class="anchored"><td class="def variant constructor"><a href="#type-t.Sub_dur_dur" class="anchor"></a><code><span>| </span><span><span class="constructor">Sub_dur_dur</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Mult" class="anchored"><td class="def variant constructor"><a href="#type-t.Mult" class="anchor"></a><code><span>| </span><span><span class="constructor">Mult</span> : <span><span>&lt; <a href="#type-overloaded">overloaded</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Mult_int_int" class="anchored"><td class="def variant constructor"><a href="#type-t.Mult_int_int" class="anchor"></a><code><span>| </span><span><span class="constructor">Mult_int_int</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Mult_rat_rat" class="anchored"><td class="def variant constructor"><a href="#type-t.Mult_rat_rat" class="anchor"></a><code><span>| </span><span><span class="constructor">Mult_rat_rat</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Mult_mon_rat" class="anchored"><td class="def variant constructor"><a href="#type-t.Mult_mon_rat" class="anchor"></a><code><span>| </span><span><span class="constructor">Mult_mon_rat</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Mult_dur_int" class="anchored"><td class="def variant constructor"><a href="#type-t.Mult_dur_int" class="anchor"></a><code><span>| </span><span><span class="constructor">Mult_dur_int</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Div" class="anchored"><td class="def variant constructor"><a href="#type-t.Div" class="anchor"></a><code><span>| </span><span><span class="constructor">Div</span> : <span><span>&lt; <a href="#type-overloaded">overloaded</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Div_int_int" class="anchored"><td class="def variant constructor"><a href="#type-t.Div_int_int" class="anchor"></a><code><span>| </span><span><span class="constructor">Div_int_int</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Div_rat_rat" class="anchored"><td class="def variant constructor"><a href="#type-t.Div_rat_rat" class="anchor"></a><code><span>| </span><span><span class="constructor">Div_rat_rat</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Div_mon_rat" class="anchored"><td class="def variant constructor"><a href="#type-t.Div_mon_rat" class="anchor"></a><code><span>| </span><span><span class="constructor">Div_mon_rat</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Div_mon_mon" class="anchored"><td class="def variant constructor"><a href="#type-t.Div_mon_mon" class="anchor"></a><code><span>| </span><span><span class="constructor">Div_mon_mon</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Div_dur_dur" class="anchored"><td class="def variant constructor"><a href="#type-t.Div_dur_dur" class="anchor"></a><code><span>| </span><span><span class="constructor">Div_dur_dur</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Lt" class="anchored"><td class="def variant constructor"><a href="#type-t.Lt" class="anchor"></a><code><span>| </span><span><span class="constructor">Lt</span> : <span><span>&lt; <a href="#type-overloaded">overloaded</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Lt_int_int" class="anchored"><td class="def variant constructor"><a href="#type-t.Lt_int_int" class="anchor"></a><code><span>| </span><span><span class="constructor">Lt_int_int</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Lt_rat_rat" class="anchored"><td class="def variant constructor"><a href="#type-t.Lt_rat_rat" class="anchor"></a><code><span>| </span><span><span class="constructor">Lt_rat_rat</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Lt_mon_mon" class="anchored"><td class="def variant constructor"><a href="#type-t.Lt_mon_mon" class="anchor"></a><code><span>| </span><span><span class="constructor">Lt_mon_mon</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Lt_dat_dat" class="anchored"><td class="def variant constructor"><a href="#type-t.Lt_dat_dat" class="anchor"></a><code><span>| </span><span><span class="constructor">Lt_dat_dat</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Lt_dur_dur" class="anchored"><td class="def variant constructor"><a href="#type-t.Lt_dur_dur" class="anchor"></a><code><span>| </span><span><span class="constructor">Lt_dur_dur</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Lte" class="anchored"><td class="def variant constructor"><a href="#type-t.Lte" class="anchor"></a><code><span>| </span><span><span class="constructor">Lte</span> : <span><span>&lt; <a href="#type-overloaded">overloaded</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Lte_int_int" class="anchored"><td class="def variant constructor"><a href="#type-t.Lte_int_int" class="anchor"></a><code><span>| </span><span><span class="constructor">Lte_int_int</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Lte_rat_rat" class="anchored"><td class="def variant constructor"><a href="#type-t.Lte_rat_rat" class="anchor"></a><code><span>| </span><span><span class="constructor">Lte_rat_rat</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Lte_mon_mon" class="anchored"><td class="def variant constructor"><a href="#type-t.Lte_mon_mon" class="anchor"></a><code><span>| </span><span><span class="constructor">Lte_mon_mon</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Lte_dat_dat" class="anchored"><td class="def variant constructor"><a href="#type-t.Lte_dat_dat" class="anchor"></a><code><span>| </span><span><span class="constructor">Lte_dat_dat</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Lte_dur_dur" class="anchored"><td class="def variant constructor"><a href="#type-t.Lte_dur_dur" class="anchor"></a><code><span>| </span><span><span class="constructor">Lte_dur_dur</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Gt" class="anchored"><td class="def variant constructor"><a href="#type-t.Gt" class="anchor"></a><code><span>| </span><span><span class="constructor">Gt</span> : <span><span>&lt; <a href="#type-overloaded">overloaded</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Gt_int_int" class="anchored"><td class="def variant constructor"><a href="#type-t.Gt_int_int" class="anchor"></a><code><span>| </span><span><span class="constructor">Gt_int_int</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Gt_rat_rat" class="anchored"><td class="def variant constructor"><a href="#type-t.Gt_rat_rat" class="anchor"></a><code><span>| </span><span><span class="constructor">Gt_rat_rat</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Gt_mon_mon" class="anchored"><td class="def variant constructor"><a href="#type-t.Gt_mon_mon" class="anchor"></a><code><span>| </span><span><span class="constructor">Gt_mon_mon</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Gt_dat_dat" class="anchored"><td class="def variant constructor"><a href="#type-t.Gt_dat_dat" class="anchor"></a><code><span>| </span><span><span class="constructor">Gt_dat_dat</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Gt_dur_dur" class="anchored"><td class="def variant constructor"><a href="#type-t.Gt_dur_dur" class="anchor"></a><code><span>| </span><span><span class="constructor">Gt_dur_dur</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Gte" class="anchored"><td class="def variant constructor"><a href="#type-t.Gte" class="anchor"></a><code><span>| </span><span><span class="constructor">Gte</span> : <span><span>&lt; <a href="#type-overloaded">overloaded</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Gte_int_int" class="anchored"><td class="def variant constructor"><a href="#type-t.Gte_int_int" class="anchor"></a><code><span>| </span><span><span class="constructor">Gte_int_int</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Gte_rat_rat" class="anchored"><td class="def variant constructor"><a href="#type-t.Gte_rat_rat" class="anchor"></a><code><span>| </span><span><span class="constructor">Gte_rat_rat</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Gte_mon_mon" class="anchored"><td class="def variant constructor"><a href="#type-t.Gte_mon_mon" class="anchor"></a><code><span>| </span><span><span class="constructor">Gte_mon_mon</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Gte_dat_dat" class="anchored"><td class="def variant constructor"><a href="#type-t.Gte_dat_dat" class="anchor"></a><code><span>| </span><span><span class="constructor">Gte_dat_dat</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Gte_dur_dur" class="anchored"><td class="def variant constructor"><a href="#type-t.Gte_dur_dur" class="anchor"></a><code><span>| </span><span><span class="constructor">Gte_dur_dur</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Eq_int_int" class="anchored"><td class="def variant constructor"><a href="#type-t.Eq_int_int" class="anchor"></a><code><span>| </span><span><span class="constructor">Eq_int_int</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Eq_rat_rat" class="anchored"><td class="def variant constructor"><a href="#type-t.Eq_rat_rat" class="anchor"></a><code><span>| </span><span><span class="constructor">Eq_rat_rat</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Eq_mon_mon" class="anchored"><td class="def variant constructor"><a href="#type-t.Eq_mon_mon" class="anchor"></a><code><span>| </span><span><span class="constructor">Eq_mon_mon</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Eq_dur_dur" class="anchored"><td class="def variant constructor"><a href="#type-t.Eq_dur_dur" class="anchor"></a><code><span>| </span><span><span class="constructor">Eq_dur_dur</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Eq_dat_dat" class="anchored"><td class="def variant constructor"><a href="#type-t.Eq_dat_dat" class="anchor"></a><code><span>| </span><span><span class="constructor">Eq_dat_dat</span> : <span><span>&lt; <a href="#type-resolved">resolved</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Fold" class="anchored"><td class="def variant constructor"><a href="#type-t.Fold" class="anchor"></a><code><span>| </span><span><span class="constructor">Fold</span> : <span><span>&lt; <a href="#type-polymorphic">polymorphic</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.HandleDefault" class="anchored"><td class="def variant constructor"><a href="#type-t.HandleDefault" class="anchor"></a><code><span>| </span><span><span class="constructor">HandleDefault</span> : <span><span>&lt; <a href="#type-polymorphic">polymorphic</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.HandleDefaultOpt" class="anchored"><td class="def variant constructor"><a href="#type-t.HandleDefaultOpt" class="anchor"></a><code><span>| </span><span><span class="constructor">HandleDefaultOpt</span> : <span><span>&lt; <a href="#type-polymorphic">polymorphic</a>.. &gt;</span> <a href="#type-t">t</a></span></span></code></td></tr></table></div></div></div><div class="odoc-spec"><div class="spec value" id="val-equal" class="anchored"><a href="#val-equal" class="anchor"></a><code><span><span class="keyword">val</span> equal : <span><span><span class="type-var">'a1</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a2</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-compare" class="anchored"><a href="#val-compare" class="anchor"></a><code><span><span class="keyword">val</span> compare : <span><span><span class="type-var">'a1</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a2</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-name" class="anchored"><a href="#val-name" class="anchor"></a><code><span><span class="keyword">val</span> name : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Returns the operator name as a valid ident starting with a lowercase character. This is different from Print.operator which returns operator symbols, e.g. <code>+$</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-kind_dispatch" class="anchored"><a href="#val-kind_dispatch" class="anchor"></a><code><span><span class="keyword">val</span> kind_dispatch : 
  <span>polymorphic:<span>( <span><span><span>&lt; polymorphic : <span class="xref-unresolved">Shared_ast__Definitions.yes</span>.. &gt;</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>monomorphic:<span>( <span><span><span>&lt; monomorphic : <span class="xref-unresolved">Shared_ast__Definitions.yes</span>.. &gt;</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?overloaded:<span>( <span><span><span>&lt; overloaded : <span class="xref-unresolved">Shared_ast__Definitions.yes</span>.. &gt;</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?resolved:<span>( <span><span><span>&lt; resolved : <span class="xref-unresolved">Shared_ast__Definitions.yes</span>.. &gt;</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'b</span></span></code></div><div class="spec-doc"><p>Calls one of the supplied functions depending on the kind of the operator</p></div></div><div class="odoc-spec"><div class="spec type" id="type-no_overloads" class="anchored"><a href="#type-no_overloads" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a no_overloads</span></span><span> =
  <span>&lt; overloaded : <span class="xref-unresolved">Shared_ast__Definitions.no</span>
  ; monomorphic : <span class="xref-unresolved">Shared_ast__Definitions.yes</span>
  ; polymorphic : <span class="xref-unresolved">Shared_ast__Definitions.yes</span>
  ; resolved : <span class="xref-unresolved">Shared_ast__Definitions.yes</span>.. &gt;</span> <span class="keyword">as</span> 'a</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-translate" class="anchored"><a href="#val-translate" class="anchor"></a><code><span><span class="keyword">val</span> translate : <span><span><span><span class="type-var">'a</span> <a href="#type-no_overloads">no_overloads</a></span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-no_overloads">no_overloads</a></span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>An identity function that allows translating an operator between different passes that don't change operator types</p></div></div><h3 id="getting-the-types-of-operators"><a href="#getting-the-types-of-operators" class="anchor"></a>Getting the types of operators</h3><div class="odoc-spec"><div class="spec value" id="val-monomorphic_type" class="anchored"><a href="#val-monomorphic_type" class="anchor"></a><code><span><span class="keyword">val</span> monomorphic_type : 
  <span><span><span><a href="#type-monomorphic">monomorphic</a> <a href="#type-t">t</a></span> <a href="../../Catala_utils/Marked/index.html#type-pos">Catala_utils.Marked.pos</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Shared_ast__Definitions.naked_typ</span> <a href="../../Catala_utils/Marked/index.html#type-pos">Catala_utils.Marked.pos</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-resolved_type" class="anchored"><a href="#val-resolved_type" class="anchor"></a><code><span><span class="keyword">val</span> resolved_type : 
  <span><span><span><a href="#type-resolved">resolved</a> <a href="#type-t">t</a></span> <a href="../../Catala_utils/Marked/index.html#type-pos">Catala_utils.Marked.pos</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Shared_ast__Definitions.naked_typ</span> <a href="../../Catala_utils/Marked/index.html#type-pos">Catala_utils.Marked.pos</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-overload_type" class="anchored"><a href="#val-overload_type" class="anchor"></a><code><span><span class="keyword">val</span> overload_type : 
  <span><span class="xref-unresolved">Shared_ast__Definitions.decl_ctx</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><a href="#type-overloaded">overloaded</a> <a href="#type-t">t</a></span> <a href="../../Catala_utils/Marked/index.html#type-pos">Catala_utils.Marked.pos</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><span class="xref-unresolved">Shared_ast__Definitions.naked_typ</span> <a href="../../Catala_utils/Marked/index.html#type-pos">Catala_utils.Marked.pos</a></span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Shared_ast__Definitions.naked_typ</span> <a href="../../Catala_utils/Marked/index.html#type-pos">Catala_utils.Marked.pos</a></span></span></code></div><div class="spec-doc"><p>The type for typing overloads is different since the types of the operands are required in advance.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">a</span> <p>detailed user error if no matching operator can be found</p></li></ul></div></div><p>Polymorphic operators are typed directly within <code>Typing</code>, since their types may contain type variables that can't be expressed outside of it</p><h3 id="overload-handling"><a href="#overload-handling" class="anchor"></a>Overload handling</h3><div class="odoc-spec"><div class="spec value" id="val-resolve_overload" class="anchored"><a href="#val-resolve_overload" class="anchor"></a><code><span><span class="keyword">val</span> resolve_overload : 
  <span><span class="xref-unresolved">Shared_ast__Definitions.decl_ctx</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><a href="#type-overloaded">overloaded</a> <a href="#type-t">t</a></span> <a href="../../Catala_utils/Marked/index.html#type-pos">Catala_utils.Marked.pos</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><span class="xref-unresolved">Shared_ast__Definitions.naked_typ</span> <a href="../../Catala_utils/Marked/index.html#type-pos">Catala_utils.Marked.pos</a></span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>&lt; resolved : <span class="xref-unresolved">Shared_ast__Definitions.yes</span>.. &gt;</span> <a href="#type-t">t</a></span> * <span>[ `Straight <span>| `Reversed</span> ]</span></span></code></div><div class="spec-doc"><p>Some overloads are sugar for an operation with reversed operands, e.g. <code>TRat * TMoney</code> is using <code>mult_mon_rat</code>. <code>`Reversed</code> is returned to signify this case.</p></div></div></div></body></html>
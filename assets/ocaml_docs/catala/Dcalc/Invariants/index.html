<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Invariants (catala.Dcalc.Invariants)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">catala</a> &#x00BB; <a href="../index.html">Dcalc</a> &#x00BB; Invariants</nav><header class="odoc-preamble"><h1>Module <code><span>Dcalc.Invariants</span></code></h1><p>This file makes explicit few structural invariants of the dcalc asbtract syntax tree. Those invariants have been checked on all tests and examples of catala. The behavior of the compiler on programs that don't follow those invariant in undefined.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value" id="val-check_all_invariants" class="anchored"><a href="#val-check_all_invariants" class="anchor"></a><code><span><span class="keyword">val</span> check_all_invariants : <span><span><a href="../../Shared_ast/index.html#type-typed">Shared_ast.typed</a> <a href="../Ast/index.html#type-program">Ast.program</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Check all invariants. Return true if all the invariants are correct. Print errors messages for each unsucessfull invariants. Here are all the invariants checked:</p><ul><li><code>invariant_default_no_arrow</code> check no default term has a function type.</li><li><code>invariant_no_partial_evaluation</code> check there is no partial function.</li><li><code>invariant_no_return_a_function</code> check no function return a function.</li><li><code>invariant_app_inversion</code> : if the term is an function application, then there is only 5 possibility : it is a let binding, it is an operator application, it is an variable application, it is a struct access function application (sub-scope call), or it is a operator application with trace.</li><li><code>invariant_match_inversion</code> : if a term is a match, then every branch is an function abstraction.</li></ul></div></div></div></body></html>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>scopelang (catala.scopelang)</title><link rel="stylesheet" href="../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="index.html">Up</a> â€“ <a href="index.html">catala</a> &#x00BB; scopelang</nav><header class="odoc-preamble"><h1 id="the-scope-language"><a href="#the-scope-language" class="anchor"></a>The scope language</h1><p>This representation is the third in the compilation chain (see <a href="index.html#architecture">Architecture</a>). Its main difference with the previous <a href="desugared.html">desugared representation</a> is that inside a scope, the definitions are ordered according to their computational dependency order, and each definition is a <code>Dcalc</code>.Ast.EDefault tree instead of a flat list of rules.</p><p>The module describing the abstract syntax tree is:</p><ul class="modules"><li><a href="Scopelang/Ast/index.html"><code>Scopelang.Ast</code></a> <span class="synopsis">Abstract syntax tree of the scope language</span></li></ul><p>Printing helpers can be found in <a href="Scopelang/Print/index.html"><code>Scopelang.Print</code></a>.</p><p>This intermediate representation corresponds to the scope language presented in the <a href="https://github.com/CatalaLang/catala/raw/master/doc/formalization/formalization.pdf">Catala formalization</a>.</p></header><nav class="odoc-toc"><ul><li><a href="#translation-to-the-default-calculus">Translation to the default calculus</a></li></ul></nav><div class="odoc-content"><h2 id="translation-to-the-default-calculus"><a href="#translation-to-the-default-calculus" class="anchor"></a>Translation to the default calculus</h2><p>The translation from the scope language to the <a href="dcalc.html">default calculus</a> involves three big features:</p><ol><li>Translating structures and enums into simpler sum and product types</li><li>Build thunked signatures for the scopes as functions</li><li>Transform the list of scopes into a program</li></ol><p>1 and 3 involve computing dependency graphs for respectively the structs and enums on one hand, and the inter-scope dependencies on the other hand. Both can be found in <a href="Scopelang/Dependency/index.html"><code>Scopelang.Dependency</code></a>, while <code>Scopelang</code>.Scope_to_dcalc is mostly responsible for 2.</p><p>Related modules:</p><ul class="modules"><li><a href="Scopelang/Dependency/index.html"><code>Scopelang.Dependency</code></a> <span class="synopsis">Graph representation of the dependencies between scopes in the Catala program. Vertices are functions, x -&gt; y if x is used in the definition of y.</span></li><li><code>Scopelang</code>.Scope_to_dcalc </li></ul></div></body></html>